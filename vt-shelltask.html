<link rel="import" href="./vt-model-element.html">

<polymer-element name="vt-shelltask" extends="vt-model-element" attributes="command status" status="enqueued">
  <template>
    <div on-click="{{cycleStatus}}">
      <link rel="stylesheet" href="vt-shelltask.css"/>
        <template if="{{injected == command}}">
          {{command}}
        </template>
        <template if="{{injected != command}}">
          {{injected}} - <i>{{command}}</i>
        </template>
    </div>
    <div id="subTasks">
      <content></content>
    </div>
  </template>
  <script>
    Polymer('vt-shelltask',{
      command : "ls",
      injected : "",
      status: "unknown",
      observe: {
        command : 'notifyCommandChanged',
      },
      dataChanged : function(){
        this.command = this.data.command;
      },
      cycleStatus : function(){
        this.setAttribute('status', (this.status == 'canceled') ? 'enqueued' : 'canceled' );
      },
      notifyCommandChanged : function(){
        this.fire('commandChanged', {'shelltask' : this});
      }
    });
  </script>
</polymer-element>